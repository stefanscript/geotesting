(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,n){e.exports=n(39)},29:function(e,t,n){},30:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n.n(a),i=n(20),r=n.n(i),c=(n(29),n(8)),l=n(9),s=n(10),d=n(12),u=n(11),m=n(13),h=n(1);n(30);function g(){return(new Date).getTimezoneOffset()/60}function f(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch(e){return""}}var p,v,E=function(){if("undefined"!==typeof navigator.languages)try{if(navigator.languages[0].substr(0,2)!==navigator.language.substr(0,2))return!0}catch(e){return!0}return!1},O=function(){return window.screen.width<window.screen.availWidth||window.screen.height<window.screen.availHeight},w=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.oscpu,a=navigator.platform.toLowerCase();if(e=t.indexOf("windows phone")>=0?"Windows Phone":t.indexOf("win")>=0?"Windows":t.indexOf("android")>=0?"Android":t.indexOf("linux")>=0?"Linux":t.indexOf("iphone")>=0||t.indexOf("ipad")>=0?"iOS":t.indexOf("mac")>=0?"Mac":"Other",("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0)&&"Windows Phone"!==e&&"Android"!==e&&"iOS"!==e&&"Other"!==e)return!0;if("undefined"!==typeof n){if((n=n.toLowerCase()).indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e)return!0;if(n.indexOf("linux")>=0&&"Linux"!==e&&"Android"!==e)return!0;if(n.indexOf("mac")>=0&&"Mac"!==e&&"iOS"!==e)return!0;if((-1===n.indexOf("win")&&-1===n.indexOf("linux")&&-1===n.indexOf("mac"))!==("Other"===e))return!0}return a.indexOf("win")>=0&&"Windows"!==e&&"Windows Phone"!==e||((a.indexOf("linux")>=0||a.indexOf("android")>=0||a.indexOf("pike")>=0)&&"Linux"!==e&&"Android"!==e||((a.indexOf("mac")>=0||a.indexOf("ipad")>=0||a.indexOf("ipod")>=0||a.indexOf("iphone")>=0)&&"Mac"!==e&&"iOS"!==e||((-1===a.indexOf("win")&&-1===a.indexOf("linux")&&-1===a.indexOf("mac"))!==("Other"===e)||"undefined"===typeof navigator.plugins&&"Windows"!==e&&"Windows Phone"!==e)))},b=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.productSub;if(("Chrome"===(e=t.indexOf("firefox")>=0?"Firefox":t.indexOf("opera")>=0||t.indexOf("opr")>=0?"Opera":t.indexOf("chrome")>=0?"Chrome":t.indexOf("safari")>=0?"Safari":t.indexOf("trident")>=0?"Internet Explorer":"Other")||"Safari"===e||"Opera"===e)&&"20030107"!==n)return!0;var a,o=eval.toString().length;if(37===o&&"Safari"!==e&&"Firefox"!==e&&"Other"!==e)return!0;if(39===o&&"Internet Explorer"!==e&&"Other"!==e)return!0;if(33===o&&"Chrome"!==e&&"Opera"!==e&&"Other"!==e)return!0;try{throw"a"}catch(i){try{i.toSource(),a=!0}catch(r){a=!1}}return a&&"Firefox"!==e&&"Other"!==e},y={enableHighAccuracy:!0,timeout:1e4,maximumAge:0},C={position:"",error:""};function x(){return"geolocation"in navigator}function W(e){console.log("g1");var t=e.coords;C.position=e,console.log(e),v&&v({position:e}),console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))}function P(e){var t="unknown error";1===e.code?t="permission denied":2===e.code?t="position unavailable (error response from location provider)":3===e.code&&(t="timed out"),C.error="ERROR(".concat(e.code,"): reason: ").concat(t,", ").concat(e.message),p&&p({error:C.error}),v&&v({error:C.error}),console.warn(C.error)}function k(e){var t=e.coords;C.position=e,console.log(e),p&&p({position:e}),console.log("Watch: Your current position is:",new Date),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))}function S(){var e=0;return e+=w()?0:100,0,e+=b()?0:100,0,e+=E()?0:100,0,e+=O()?0:100,0,e+=j(f())?0:100,0,e+=N(g())?0:100,0,parseInt(e/6,10)}function j(e){var t=String(e).toLowerCase();return-1===["america/toronto","america/montreal"].indexOf(t)}function N(e){console.log(e);var t=parseInt(e,10);return!(t<=6&&t>=4)}function A(e){var t=e.title,n=e.value;return o.a.createElement("div",{className:"observation"},t,": ",o.a.createElement("span",null,n))}function L(e){var t=e.title,n=e.passed;return o.a.createElement("div",{className:"observation observation-test ".concat(n?"":"failed")},t,": ",o.a.createElement("span",{className:"result"},JSON.stringify(n)))}var F,T,V=function(e,t,n){if(n.length){var a="data:text/csv;charset=utf-8,",o="latitude,longitude,accuracy,altitude,altitudeAccuracy,heading,speed".split(",");a+=o.join(",")+",timestamp\r\n",n.forEach(function(e){a+=function(e,t){var n=t.map(function(t){return null===e.coords[t]?"":e.coords[t].toString()});return n.push(e.timestamp),n.join(",")+"\r\n"}(e,o)});var i=encodeURI(a),r=document.createElement("a");r.setAttribute("href",i),r.setAttribute("download","customers.csv"),document.body.appendChild(r),r.click(),document.body.removeChild(r),r.click(),console.log("clicked")}},I=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={position:"",error:"",errorOne:"",prevWatchPositions:[],prevOnePositions:[]},n.handleWatchChanges=n.handleWatchChanges.bind(Object(h.a)(Object(h.a)(n))),n.handleWatchClick=n.handleWatchClick.bind(Object(h.a)(Object(h.a)(n))),n.handleOneClick=n.handleOneClick.bind(Object(h.a)(Object(h.a)(n))),n.handleOneChanges=n.handleOneChanges.bind(Object(h.a)(Object(h.a)(n))),n.downloadWatchCSV=n.downloadWatchCSV.bind(Object(h.a)(Object(h.a)(n))),n.downloadOneCSV=n.downloadOneCSV.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleWatchChanges",value:function(e){var t=e.position,n=e.error;if(n)this.setState({error:n});else{var a={coords:{},timestamp:t.timestamp};for(var o in t.coords)console.log("key: ",o,t.coords[o]),a.coords[o]=t.coords[o];this.setState({prevWatchPositions:[].concat(Object(c.a)(this.state.prevWatchPositions),a)})}}},{key:"handleOneChanges",value:function(e){var t=e.position,n=e.error;if(n)this.setState({errorOne:n});else{var a={coords:{},timestamp:t.timestamp};for(var o in t.coords)console.log("key: ",o,t.coords[o]),a.coords[o]=t.coords[o];this.setState({prevOnePositions:[].concat(Object(c.a)(this.state.prevOnePositions),a)})}}},{key:"handleWatchClick",value:function(e){!function(e){var t;x()&&(p=e,t=navigator.geolocation.watchPosition(k,P,y))}(this.handleWatchChanges)}},{key:"handleOneClick",value:function(){var e;e=this.handleOneChanges,x()&&(v=e,navigator.geolocation.getCurrentPosition(W,P,y))}},{key:"componentDidMount",value:function(){window.addEventListener("orientationchange",this.doOnOrientationChange),this.doOnOrientationChange()}},{key:"doOnOrientationChange",value:function(){window.innerHeight>window.innerWidth?console.log("portrait"):console.log("landscape")}},{key:"downloadOneCSV",value:function(e){return e.stopPropagation(),V(0,0,this.state.prevOnePositions),!1}},{key:"downloadWatchCSV",value:function(e){return e.stopPropagation(),V(0,0,this.state.prevWatchPositions),!1}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"App"},o.a.createElement("header",null,"Geolocation"),o.a.createElement("section",{className:"side-container"},o.a.createElement("div",{className:"head"+(S()<50?" sad":"")},o.a.createElement("div",{className:"face"},o.a.createElement("div",{className:"mouth"}),o.a.createElement("div",{className:"eye-group"},o.a.createElement("div",{className:"eye eye-left"}),o.a.createElement("div",{className:"eye eye-right"})))),o.a.createElement("div",null,"Device Confidence: ",S()),o.a.createElement("div",{className:"details"},o.a.createElement(L,{title:"OS ok",passed:!w()}),o.a.createElement(L,{title:"Browser ok",passed:!b()}),o.a.createElement(L,{title:"Languages ok",passed:!E()}),o.a.createElement(A,{title:"Language",value:JSON.stringify(navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage||navigator.language||navigator.browserLanguage||"en")}),o.a.createElement(A,{title:"Languages",value:JSON.stringify(navigator.languages)}),o.a.createElement(L,{title:"Resolution ok",passed:!O()}),o.a.createElement(L,{title:"Timezone IANA",passed:!j(f())}),o.a.createElement(A,{title:"Timezone IANA",value:JSON.stringify(f())}),o.a.createElement(L,{title:"Timezone Offset",passed:!N(g())}),o.a.createElement(A,{title:"Timezone Offset",value:JSON.stringify(g())+"hr(s)"}),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null)),o.a.createElement("div",{className:"details"},o.a.createElement("h1",null," Watch Position"),o.a.createElement("button",{onClick:this.handleWatchClick},"Start Watching Geolocation"),o.a.createElement("code",null,this.state.error),o.a.createElement("ul",{className:"entries"},o.a.createElement("li",{key:"w0"},o.a.createElement("code",{className:"index-column"},"#"),o.a.createElement("code",null,"latitude"),o.a.createElement("code",null,"longitude"),o.a.createElement("code",null,"accuracy"),o.a.createElement("code",null,"altitude"),o.a.createElement("code",null,"altitudeAccuracy"),o.a.createElement("code",null,"heading"),o.a.createElement("code",null,"speed"),o.a.createElement("code",null,"timestamp")),this.state.prevWatchPositions.map(function(t,n){return o.a.createElement("li",{key:"w"+n},o.a.createElement("code",{className:"index-column"},n,"."),o.a.createElement("code",null,t.coords.latitude),o.a.createElement("code",null,t.coords.longitude),o.a.createElement("code",null,t.coords.accuracy,"m"),o.a.createElement("code",null,t.coords.altitude),o.a.createElement("code",null,t.coords.altitudeAccuracy),o.a.createElement("code",null,t.coords.heading),o.a.createElement("code",null,t.coords.speed),o.a.createElement("code",null,"+",t.timestamp-e.state.prevWatchPositions[0].timestamp," ",10===(t.timestamp+"").length?"sec":"ms"))})),o.a.createElement("a",{id:"downloadwatchCSV",onClick:this.downloadWatchCSV},"Download CSV"),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("br",null),o.a.createElement("h1",null," One time Position"),o.a.createElement("button",{onClick:this.handleOneClick},"Get Quick Geolocation"),o.a.createElement("code",null,this.state.error),o.a.createElement("ul",{className:"entries"},o.a.createElement("li",{key:"0"},o.a.createElement("code",{className:"index-column"},"#"),o.a.createElement("code",null,"latitude"),o.a.createElement("code",null,"longitude"),o.a.createElement("code",null,"accuracy"),o.a.createElement("code",null,"altitude"),o.a.createElement("code",null,"altitudeAccuracy"),o.a.createElement("code",null,"heading"),o.a.createElement("code",null,"speed"),o.a.createElement("code",null,"timestamp")),this.state.prevOnePositions&&this.state.prevOnePositions.map(function(t,n){return o.a.createElement("li",{key:n},o.a.createElement("code",{className:"index-column"},n,"."),o.a.createElement("code",null,t.coords.latitude),o.a.createElement("code",null,t.coords.longitude),o.a.createElement("code",null,t.coords.accuracy,"m"),o.a.createElement("code",null,t.coords.altitude),o.a.createElement("code",null,t.coords.altitudeAccuracy),o.a.createElement("code",null,t.coords.heading),o.a.createElement("code",null,t.coords.speed),o.a.createElement("code",null,"+",t.timestamp-e.state.prevOnePositions[0].timestamp," ",10===(t.timestamp+"").length?"sec":"ms"))})),o.a.createElement("a",{id:"downloadoneCSV",onClick:this.downloadOneCSV},"Download CSV"))),o.a.createElement("footer",null))}}]),t}(a.Component),M=n(21),R=n(6),D={enableHighAccuracy:!0,timeout:6e4,maximumAge:0},J={position:"",error:""};function z(){return"geolocation"in navigator}function G(e){var t=e.coords;J.position=e,console.log(e),T&&T({position:e}),console.log("Your current position is:"),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))}function H(e){var t="unknown error";1===e.code?t="permission denied":2===e.code?t="position unavailable (error response from location provider)":3===e.code&&(t="timed out"),J.error="ERROR(".concat(e.code,"): reason: ").concat(t,", ").concat(e.message),F&&F({error:J.error}),T&&T({error:J.error}),console.warn(J.error)}function Y(e){var t=e.coords;J.position=e,console.log(e),F&&F({position:e}),console.log("Watch: Your current position is:",new Date),console.log("Latitude : ".concat(t.latitude)),console.log("Longitude: ".concat(t.longitude)),console.log("More or less ".concat(t.accuracy," meters."))}var B=function(e){function t(e){var n;return Object(l.a)(this,t),(n=Object(d.a)(this,Object(u.a)(t).call(this,e))).state={currentPositions:[],watchPositions:[],position:{coords:{},timestamp:0},error:"",info:{message:"",testFinished:!1,passed:!1},infoWatch:{message:"",testFinished:!1,passed:!1}},n.handleCurrentPosition=n.handleCurrentPosition.bind(Object(h.a)(Object(h.a)(n))),n.handleWatchPosition=n.handleWatchPosition.bind(Object(h.a)(Object(h.a)(n))),n}return Object(m.a)(t,e),Object(s.a)(t,[{key:"handleCurrentPosition",value:function(e){var t=e.position,n=e.error;if(t){var a={coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed},timestamp:t.timestamp};this.setState({position:a}),this.setState({currentPositions:[].concat(Object(c.a)(this.state.currentPositions),[a])})}n&&this.setState({error:n})}},{key:"handleWatchPosition",value:function(e){var t=e.position,n=e.error;if(t){var a={coords:{latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy,altitude:t.coords.altitude,altitudeAccuracy:t.coords.altitudeAccuracy,heading:t.coords.heading,speed:t.coords.speed},timestamp:t.timestamp};this.setState({position:a}),this.setState({watchPositions:[].concat(Object(c.a)(this.state.watchPositions),[a])})}n&&this.setState({error:n})}},{key:"runCurrentPositionTest",value:function(){if(this.state.currentPositions.count>0){var e=this.state.currentPositions.map(function(e,t,n){return 0!==t?n[t].timestamp-n[t-1].timestamp:0});console.log("jitters",e),e.filter(function(e){return 0===e}).length>1?this.setState({info:{message:"Current position test - Failed",passed:!1,testFinished:!0}}):this.setState({info:{message:"Current position test - Passed",passed:!0,testFinished:!0}})}else this.setState({info:{message:"Current position test - Failed (no geo data)",passed:!1,testFinished:!0}});this.startWatchTest()}},{key:"componentDidMount",value:function(){var e,t=this,n=this;this.setState({info:{message:"Running current position test....please wait"}}),e=setInterval(function(){!function(e){if(!z())throw new Error("geolocation not available");T=e,navigator.geolocation.getCurrentPosition(G,H,D)}(t.handleCurrentPosition)},1e3),setTimeout(function(){clearInterval(e),n.runCurrentPositionTest()},8e3)}},{key:"startWatchTest",value:function(){if(z()){var e,t=this;this.setState({infoWatch:{message:"Running watch position test....please wait"}}),e=function(e){var t;return z()&&(F=e,t=navigator.geolocation.watchPosition(Y,H,D)),t}(this.handleWatchPosition),setTimeout(function(){window.navigator.geolocation.clearWatch(e),t.runWatchPositionTest()},5e4)}}},{key:"runWatchPositionTest",value:function(){if(this.state.watchPositions.count>0){var e=this.state.watchPositions.map(function(e,t,n){return 0!==t?n[t].timestamp-n[t-1].timestamp:0});console.log("jitters",e),e.filter(function(e){return 0===e}).length===this.state.watchPositions.count?this.setState({infoWatch:{message:"Watch position test - Failed",passed:!1,testFinished:!0}}):this.setState({infoWatch:{message:"Watch position test - Passed",passed:!0,testFinished:!0}})}else this.setState({infoWatch:{message:"Watch position test - Failed (no geo data)",passed:!1,testFinished:!0}})}},{key:"render",value:function(){var e=this.state.position,t=this.state.error;return o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"wrapper"},o.a.createElement("div",{className:"sections"},o.a.createElement("section",{className:"section"},o.a.createElement("p",{className:this.state.info.testFinished?this.state.info.passed?"ok":"not-ok":""},this.state.info.message),o.a.createElement("p",{className:this.state.infoWatch.testFinished?this.state.infoWatch.passed?"ok":"not-ok":""},this.state.infoWatch.message)),o.a.createElement("section",{className:"section"},o.a.createElement("div",{className:"position-details"},o.a.createElement("h2",null,"Position"),o.a.createElement("ul",null,o.a.createElement("li",null,o.a.createElement("div",null,"Latitude"),o.a.createElement("div",null,e.coords.latitude)),o.a.createElement("li",null,o.a.createElement("div",null,"Longitude"),o.a.createElement("div",null,e.coords.longitude)),o.a.createElement("li",null,o.a.createElement("div",null,"Accuracy"),o.a.createElement("div",null,e.coords.accuracy," m")),o.a.createElement("li",null,o.a.createElement("div",null,"Altitude"),o.a.createElement("div",null,e.coords.altitude)),o.a.createElement("li",null,o.a.createElement("div",null,"Altitude Accuracy"),o.a.createElement("div",null,e.coords.altitudeAccuracy)),o.a.createElement("li",null,o.a.createElement("div",null,"Latitude"),o.a.createElement("div",null,e.coords.heading)),o.a.createElement("li",null,o.a.createElement("div",null,"Speed"),o.a.createElement("div",null,e.coords.speed))),o.a.createElement("div",null,t?"Error: "+t:""))))))}}]),t}(o.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(function(){return o.a.createElement(M.a,{basename:"/geotesting"},o.a.createElement("header",null,o.a.createElement("h2",null,"Geo Testing")),o.a.createElement(R.c,null,o.a.createElement(R.a,{exact:!0,path:"/",component:I}),o.a.createElement(R.a,{exact:!0,path:"/test",component:B})))},null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[24,1,2]]]);
//# sourceMappingURL=main.6fe21740.chunk.js.map